<div class="container-fluid">
<% @page_title="财务对账" %>
	<div class="row-fluid">
		<div class="alert alert-info">
			<button type="button" class="close" data-dismiss="alert">×</button>
			<strong>提示:</strong> 请输入查询条件进行查询!
		</div>
		<div class="row-fluid">
			<div class="well">
			        <%= form_tag transaction_reconciliation_index_path,method:"get",remote: :true,id: "index_and_export_form" do %>
				 <%= label_tag(:l1, "支付类型:",class:"label_inline") %> 
				 <%= select_tag(:payway,options_for_select([["",""],["paypal","paypal"],["sofort","sofort"],["支付宝","alipay"],["积分","score"],["电子现金","e_cash"]])) %> 
				 <%= label_tag(:l2, "支付子类型:",class:"label_inline") %>
				 <%= select_tag(:paytype,options_for_select([["",""],["国内支付","transaction"],["海外支付","oversea"]])) %> 
				 <%= label_tag(:l3, "对账状态:",class:"label_inline") %> 
				 <%= select_tag(:reconciliation_flag,options_for_select([["",""],["未对账","0"],["对账失败","1"],["对账成功","2"]])) %> 
				 </br>
				 <%= label_tag(:l3, "交易号:",class:"label_inline") %> <%= text_field_tag(:transactionid) %>
				 <%= label_tag(:l4, "订单号/补款号:",class:"label_inline") %> <%= text_field_tag(:order_no) %>
				 <%= label_tag(:l7, "发票状态:",class:"label_inline") %> 
				 <%= select_tag(:confirm_flag,options_for_select([["",""],["未确认","0"],["已确认","2"]])) %> 
				 </br>
				 <%= label_tag(:l5, "交易开始时间:",class:"label_inline") %> <%= datetime_field_tag(:start_time) %>
				 <%= label_tag(:l6, "交易结束时间:",class:"label_inline") %> <%= datetime_field_tag(:end_time) %>
				 <%= label_tag(:l8, "国家:",class:"label_inline") %>
				 <%= select_tag(:country,options_for_select([["",""],["德国","de"],["荷兰","nl"],["中国","cn"],["奥地利","at"],["英国","gb"]])) %> 
				 <div class="btn-toolbar">
					<%= submit_tag("查询",class: "btn btn-primary") %>
					<%= link_to "导出",transaction_reconciliation_export_path,class: "btn",method: "get",id: "link_to_export"%>
				          	<%= button_tag("清除条件",type: 'button',class: "btn",id: "button_clear") %>
			          	</div>
			        <% end %>
			</div>
		</div>
	</div>

	<div class="row-fluid">
		<% unless flash[:notice].blank? %>
			<div class="alert alert-info">
				<button type="button" class="close" data-dismiss="alert">×</button>
				<%=flash[:notice]%>
			</div>
		<% end %>

		<div class="well">
			<table class="table" id="reconciliation_details_table">
				<thead>
					<tr>
						<th>支付类型</th>
						<th>子类型</th>
						<th>交易号</th>
						<th>订单号/补款号</th>
						<th>对账状态</th>
						<th>金额</th>
						<th>货币</th>
<!-- 						<th>支付系统返回状态</th>
						<th>对账备注</th> -->
						<th>交易时间 </th>
						<th>操作 </th>
					</tr>
				</thead>
				<%= render partial: "index",collection: @reconciliation_details,as: :reconciliation_detail %>
			</table>
			<div class="div_paginate">
				<%= render partial: "layouts/paginate_replace_ajax",locals: {page_array: @reconciliation_details} %>
			</div>
		</div>
	</div>
</div>